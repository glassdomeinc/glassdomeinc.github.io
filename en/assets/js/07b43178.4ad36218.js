"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[2877],{4137:(e,t,o)=>{o.d(t,{Zo:()=>s,kt:()=>m});var n=o(7294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var p=n.createContext({}),c=function(e){var t=n.useContext(p),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},s=function(e){var t=c(e.components);return n.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,r=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=c(o),m=a,g=d["".concat(p,".").concat(m)]||d[m]||u[m]||r;return o?n.createElement(g,i(i({ref:t},s),{},{components:o})):n.createElement(g,i({ref:t},s))}));function m(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=o.length,i=new Array(r);i[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var c=2;c<r;c++)i[c]=o[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}d.displayName="MDXCreateElement"},9939:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var n=o(7462),a=(o(7294),o(4137));const r={slug:"go-project-structure-eng",title:"Discussion about Go Language and Project Structure",authors:"mike",tags:["go","golang"]},i=void 0,l={permalink:"/en/blog/go-project-structure-eng",source:"@site/blog/2022-11-01-go-project-structure-eng.md",title:"Discussion about Go Language and Project Structure",description:"This is a discussion about the directory structure of Go applications.",date:"2022-11-01T00:00:00.000Z",formattedDate:"November 1, 2022",tags:[{label:"go",permalink:"/en/blog/tags/go"},{label:"golang",permalink:"/en/blog/tags/golang"}],readingTime:4.795,hasTruncateMarker:!0,authors:[{name:"Mike",title:"Software Engineer Intern",url:"https://github.com/dcl3",imageURL:"https://avatars.githubusercontent.com/u/56098714?v=4",key:"mike"}],frontMatter:{slug:"go-project-structure-eng",title:"Discussion about Go Language and Project Structure",authors:"mike",tags:["go","golang"]},prevItem:{title:"Go \uc800\uc6a9\ub7c9 \ubc14\uc774\ub108\ub9ac",permalink:"/en/blog/go-minimal-binart"},nextItem:{title:"Go \uc5b8\uc5b4\uc640 \ud504\ub85c\uc81d\ud2b8 \uad6c\uc870\uc5d0 \uad00\ud55c \uc774\uc57c\uae30",permalink:"/en/blog/go-project-structure"}},p={authorsImageUrls:[void 0]},c=[{value:"Introduction to Go",id:"introduction-to-go",level:2},{value:"The Benefits of Go",id:"the-benefits-of-go",level:2},{value:"Install Go",id:"install-go",level:2},{value:"Go Project Structure",id:"go-project-structure",level:2},{value:"The Go Project is a Module",id:"the-go-project-is-a-module",level:3},{value:"Getting Started with Go Module",id:"getting-started-with-go-module",level:3},{value:"No Separate src Directory, module is root package",id:"no-separate-src-directory-module-is-root-package",level:3},{value:"The main package (entry point code) is located under the <code>cmd/</code> directory",id:"the-main-package-entry-point-code-is-located-under-the-cmd-directory",level:3}],s={toc:c};function u(e){let{components:t,...o}=e;return(0,a.kt)("wrapper",(0,n.Z)({},s,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This is a discussion about the directory structure of Go applications."),(0,a.kt)("h2",{id:"introduction-to-go"},"Introduction to Go"),(0,a.kt)("p",null,"\uc81c\uac00 Go\ub97c \uc54c\uac8c \ub41c \uac83\uc740 2015\ub144 \ud31f\uce90\uc2a4\ud2b8 ",(0,a.kt)("a",{parentName:"p",href:"https://www.podbbang.com/channels/9126"},'"\ub098\ub294 \ud504\ub85c\uadf8\ub798\uba38\ub2e4"')," \uc5d0\ud53c\uc18c\ub4dc ",(0,a.kt)("a",{parentName:"p",href:"https://www.podbbang.com/channels/9126/episodes/21668083"},'"\uad6c\uae00 \uc5d4\uc9c0\ub2c8\uc5b4\uac00 \ub9d0\ud558\ub294 Go\uc5b8\uc5b4\uc758 \ub9e4\ub825"'),"\uc5d0\uc11c\uc600\uc2b5\ub2c8\ub2e4. Google \uc5d4\uc9c0\ub2c8\uc5b4\ub85c \uc77c\ud588\ub358 ",(0,a.kt)("a",{parentName:"p",href:"https://www.linkedin.com/in/jaehyunyeom"},"\uc5fc\uc7ac\ud604")," \ub2d8\uc774 ",(0,a.kt)("a",{parentName:"p",href:"https://www.yes24.com/Product/Goods/24759320"},'"\ub514\uc2a4\ucee4\ubc84\ub9ac Go"'),"\ub77c\ub294 \ucc45\uc744 \ub0b4\uba74\uc11c \ubc29\uc1a1\uc5d0 \ucd9c\uc5f0\ud574 Go \uc5b8\uc5b4\uc5d0 \uad00\ud574 \uc774\uc57c\uae30\ub97c \ud574\uc8fc\uc5c8\uc2b5\ub2c8\ub2e4. \uadf8\ub9ac\uace0 Go \uc2a4\ud130\ub514 \uadf8\ub8f9\uc744 \ud1b5\ud574 \ud29c\ud1a0\ub9ac\uc5bc\uc744 \uc870\uae08 \ud574\ubcf4\uc558\uc2b5\ub2c8\ub2e4\ub9cc, \uadf8\ud6c4\ub85c \uc0ac\uc2e4\uc0c1 \uc2e4\ubb34\uc801\uc73c\ub85c Go\ub97c \uc0ac\uc6a9\ud55c \uc801\uc740 \uc5c6\uc5c8\uc2b5\ub2c8\ub2e4."),(0,a.kt)("p",null,"I got to know Go on the 2015 podcast ",(0,a.kt)("a",{parentName:"p",href:"https://www.podbbang.com/channels/9126"},'"I\'m a Programmer"')," episode ",(0,a.kt)("a",{parentName:"p",href:"https://www.podbbang.com/channels/9126/episodes/21668083"},'"The Go Language Attraction of Google Engineers"'),". ",(0,a.kt)("a",{parentName:"p",href:"https://www.linkedin.com/in/jaehyunyeom"},"Yeom Jae-hyun"),", who worked as a Google engineer, appeared on the show and talked about the Go language while publishing a book called ",(0,a.kt)("a",{parentName:"p",href:"https://www.yes24.com/Product/Goods/24759320"},'"Discovery Go"'),". And I did a little tutorial through a Go study group, but I haven't actually used Go in practice since."),(0,a.kt)("p",null,"Glassdome uses Go language to develop applications."),(0,a.kt)("h2",{id:"the-benefits-of-go"},"The Benefits of Go"),(0,a.kt)("p",null,"First off, Go is quite popular in the industry. It's a language that I believe will continue to be popular."),(0,a.kt)("p",null,"The syntax resembles C, which is learned in basically any school."),(0,a.kt)("p",null,"At the same time, it is easier to use than C. (obviously)"),(0,a.kt)("p",null,"Furthermore, it performs better than VM or script engine-based languages."),(0,a.kt)("p",null,"Another advantage that I found was,"),(0,a.kt)("p",null,"Go applications are statically compiled, minimizing runtime dependence, and are very small when built with a container image."),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://hub.docker.com/_/scratch"},"Empty container without even an OS")," can only be run by inserting the Go binary. Therefore, it takes less time to upload images when developing and deploying, and less time to download container images from the Kubernetes node and less time to prepare for execution."),(0,a.kt)("admonition",{title:"Go Container Image Size",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"When you build a Web application server with JVM or NodeJS, no matter how small you try to make it, it can easily exceed 100MBs and even become hundreds of MBs. On the other hand, you can create a Go container of less than 10 MB even if you include all the packages you need.")),(0,a.kt)("h2",{id:"install-go"},"Install Go"),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"We recommend that you install it as a GVM.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"gvm install go1.19\n")),(0,a.kt)("h2",{id:"go-project-structure"},"Go Project Structure"),(0,a.kt)("p",null,"Because Go syntax is easy, developers who have used other programming languages can adapt quickly."),(0,a.kt)("p",null,"But sometimes when looking at the code you might not know what to do."),(0,a.kt)("p",null,"For example, how do you capture the directory structure of the Go project?"),(0,a.kt)("p",null,"Today I'm going to talk about this."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"The document you want to refer to is ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/golang-standards/project-layout"},"Standard Go Project Layout"),".")),(0,a.kt)("h3",{id:"the-go-project-is-a-module"},"The Go Project is a Module"),(0,a.kt)("p",null,"Since Go 1.14, Go has had the the concept of a Module."),(0,a.kt)("p",null,"Before the Go Module came out, Go had a structure where dependency packages were gathered and installed in the same place the execution environment was installed (GOPATH); which is similar to Python."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Similarly, if you do not use venv in Python the package is installed in the python installation path ",(0,a.kt)("inlineCode",{parentName:"p"},"python-x.y.z/site-packages/"),".")),(0,a.kt)("p",null,"But we don't need to go over old information, you can consider ",(0,a.kt)("strong",{parentName:"p"},"all the latest Go releases as using Go Modules"),"."),(0,a.kt)("p",null,"Dependent packages are managed separately for each module."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Go Module = Project (in other languages)")),(0,a.kt)("h3",{id:"getting-started-with-go-module"},"Getting Started with Go Module"),(0,a.kt)("p",null,"Let's make a module called ",(0,a.kt)("inlineCode",{parentName:"p"},"mymodule"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"mkdir mymodule\ncd mymodule\n\ngo mod init github.com/glassdomeinc/mymodule\n")),(0,a.kt)("p",null,"The file ",(0,a.kt)("inlineCode",{parentName:"p"},"go.mod")," is created."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="go.mod"',title:'"go.mod"'},"module github.com/glassdomeinc/mymodule\n\ngo 1.19\n")),(0,a.kt)("h3",{id:"no-separate-src-directory-module-is-root-package"},"No Separate src Directory, module is root package"),(0,a.kt)("p",null,"In JVM languages, including Java, the path that the compiler recognizes as a source code file is conventionally defined as ",(0,a.kt)("inlineCode",{parentName:"p"},"src/main/java"),"."),(0,a.kt)("p",null,"But instead of having that rule in Go, the Go module directory itself becomes the root package for that module."),(0,a.kt)("p",null,"If you look at many Go open source projects hosted on GitHub, you can see that the repository itself is a Go Module that contains the source code ",(0,a.kt)("inlineCode",{parentName:"p"},"*.go")," directly in the root directory."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"+ mymodule/\n+-- go.mod\n+-- go.sum\n+-- README.md\n+-- myfile.go\n")),(0,a.kt)("p",null,"You can also put the ",(0,a.kt)("inlineCode",{parentName:"p"},"go.mod")," and source code ",(0,a.kt)("inlineCode",{parentName:"p"},"*.go")," files side by side in the module root directory."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="myfile.go"',title:'"myfile.go"'},"package mymodule\n\nfunc Xxx() {\n  ...\n}\n")),(0,a.kt)("h3",{id:"the-main-package-entry-point-code-is-located-under-the-cmd-directory"},"The main package (entry point code) is located under the ",(0,a.kt)("inlineCode",{parentName:"h3"},"cmd/")," directory"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="main.go"',title:'"main.go"'},"package main\n\nfunc main() {\n  ...\n}\n")),(0,a.kt)("p",null,"The entry point code for the Go application is written in a reserved package called ",(0,a.kt)("inlineCode",{parentName:"p"},"main"),". However, the ",(0,a.kt)("inlineCode",{parentName:"p"},"main")," package cannot be placed in the same directory as any other generic package. If you place ",(0,a.kt)("inlineCode",{parentName:"p"},"main.go")," in the root path of the module, it will take away the root package digits (most importantly) where the other source code files will fit."),(0,a.kt)("p",null,"Therefore, ",(0,a.kt)("inlineCode",{parentName:"p"},"main.go")," is placed in the ",(0,a.kt)("inlineCode",{parentName:"p"},"cmd/")," directory instead of the module's root path."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"+ mymodule/\n+-+ cmd/\n| +-- main.go\n+-- go.mod\n+-- go.sum\n+-- README.md\n+-- myfile.go\n")),(0,a.kt)("p",null,"(We don't really execute this well) If there are multiple entry points, place them in each subdirectory under ",(0,a.kt)("inlineCode",{parentName:"p"},"cmd/"),"."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"There can only be 0~1 ",(0,a.kt)("inlineCode",{parentName:"p"},"main")," in each directory")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"+ mymodule/\n+-+ cmd/\n| +-+ main1\n| | +-- main.go\n| +-+ main2\n|   +-- main.go\n+-- go.mod\n+-- go.sum\n+-- README.md\n+-- myfile.go\n")),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Work in Progress \ud83d\udea7")))}u.isMDXComponent=!0}}]);